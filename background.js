(function (_0x2f9d33, _0x1a9518) {
  const _0x43af1d = _0x2f9d33();
  while (true) {
    try {
      const _0x5b8d55 = -parseInt(_0x33a2(219, 0x24a)) / 1 + -parseInt(_0x33a2(186, 0x2b3)) / 2 * (parseInt(_0x33a2(323, 0x393)) / 3) + -parseInt(_0x33a2(446, 0x22c)) / 4 + parseInt(_0x33a2(249, 0x1d4)) / 5 + -parseInt(_0x33a2(429, 0x3d6)) / 6 * (-parseInt(_0x33a2(398, -0x29c)) / 7) + -parseInt(_0x33a2(339, -0x1d8)) / 8 + -parseInt(_0x33a2(492, 0x26d)) / 9 * (-parseInt(_0x33a2(548, 0x397)) / 10);
      if (_0x5b8d55 === _0x1a9518) {
        break;
      } else {
        _0x43af1d.push(_0x43af1d.shift());
      }
    } catch (_0x3ccca3) {
      _0x43af1d.push(_0x43af1d.shift());
    }
  }
})(_0x5c10, 975943);

function _0x5c10() {
  const _0x4dc1df = ['15367080jcIlSD', "tab ", 'jLlLq', 'YWoIU', 'RDSHQ', 'kOwJt', 'asarb', 'bkwBa', 'acebo', 'alovS', 'se.pn', 'get', 'delet', 'YPEUO', 'YVBGJ', 'bxLMZ', 'n-19.', 'UyJFC', 'zukFL', 'IKREC', 'Start', 'uRTqm', 'onUpd', 'oLvCO', 'aaeFK', 'NyvMy', 'BHWSl', 'HrkDH', 'onIns', 'MWPfk', '/acco', '.goog', 'zDpam', 'lSaAN', 'apply', 'HYayC', 'CJLog', 'FnWYa', 'w.vie', 'popup', 'UkPzD', 'path', 'WJixa', 'KZnkX', 'baiht', " due ", 'stene', 'vesxD', 'HKPDN', 'VKYKr', 'stora', 'woLpA', '/asse', 'HmrtA', 'snhpi', 'ube.c', "ding ", 'uwgZK', 'actio', '203zLdvMt', 'url', 'uPXun', 'urvsa', 'BOCDi', 'BHXEh', 'Worke', 'const', 'xUPgB', 'CyGVZ', 'JngLp', 'ofXGo', 'ing', 'XeErg', 'om/*', 'zOJce', 'ok.co', 'KLFhb', 'KUSSx', 'gjXDG', '*://*', 'lem', 'fmXoL', 'Lomik', 'KrdLP', 'ebTbx', 'yHbOP', 'NDNOk', 'title', 'hostn', 'ebTYh', '311964WASTTC', 'FuKMq', 'HhcSJ', 'xJgvj', 'CoyYX', 'iNCys', 'LZnyI', 'index', 'ame', 'toLow', 'AZaWj', 'cdoNu', 'gFnmU', 'WAgMz', 'tle', 'be.co', 'png', '1488724oVysCC', 'XncWg', 'searc', 'vzWYl', 'cFSPC', 'remov', 'histo', 'GetDa', 'qCscp', "Stop ", 'ated', 'cked', 'xpjuy', 'KAfbg', 'OGpLD', '://ww', 'anlOj', 'NjosQ', 'NiFKU', 'mBGlk', 'PFPjI', 'setIc', 'tyriz', 'ZTUfm', 'TgrlV', 'XsLNo', 'zVNye', 'rTgIu', 'yzJOu', 'ts/im', 'pfkKM', 'mKSoY', 'nstag', 'forEa', 'www.f', 'lmksM', 'nZUHX', 'qJAeo', 'qOVEr', 'zuybt', 'oqMNH', 'CTeEc', 'EhmFS', 'Qiunw', 'ized', 'nBlDV', '25002OPYSYz', 'onCli', 'inclu', '.html', 'HepCL', 'OOEel', 'kieGO', 'BEmWb', 'GwHbb', 'TSuoe', 'Kbzyh', 'SkGFp', 'CIdcn', 'loadi', 'iqoBG', 'AkUNf', 'yLcrx', 'spGsF', 'KuPNh', 'WsXTB', 'MHkGj', 'MQTTp', 'essag', 'OIpBk', 'aSFbS', 'rhwUy', 'LtdLY', '.net', 'yWbGK', 'pathn', 'kAOWp', 'qOlPZ', 'scFfa', 'yUkKu', 'WQKGX', 'qFPaa', 'CgBHL', 'izCxW', 'Hcaue', 'gfDjD', 'ers', 'jcYtY', '/sorr', 'uYRdV', 'wtneT', 'PAara', '.yout', 'DKgIx', 'llKzV', 'uwZyH', 'youtu', 'gQiES', 'sIkmI', 'GvKmx', 'lnYIT', 'runti', '14860ZZbZDn', 'set', 'KYtJo', 'JBYcb', 'le.', 'cWBho', 'xMXKT', 'nwXmU', 'pPVCx', 'KxlUj', 'AbTaj', '(((.+', 'ip.ne', 'ARAAR', 'VmYQB', 'BQIyD', 'zTGnE', 'luSre', 'vsbkv', 'NjvdL', 'addLi', 'pKPys', 'pZTbF', 'QFQOB', 'ZQLpu', 'tTTUx', 'eTab', 'nfHLi', 'focus', 'sendM', 'yaNQa', 'THCiN', 'QEmIW', 'UzfrW', 'WZVKt', 'openT', 'statu', 'fhYQH', 'aaIPl', 'iHpQs', 'bLqUL', 'aOunz', 'vdgGd', 'MALtm', 'ram.c', 'YzPtu', 'ktatZ', 'NhwIT', 'WtTbr', 'creat', 'xURrl', 'XPRlK', 'text', 'lxaQH', 'hmSpZ', 'GsBbo', 'YWtkd', '2253766OlBgae', 'yzDjH', 'QKfOS', 'dwdqa', 'iJNsf', 'UhpWb', 'lengt', 'onMes', 'JqbFH', 'Hzyid', 'zDzMX', 'GdfiU', 'eQraB', 'StaZa', 'FmyOj', 'LkAZV', 'IrMVl', 'IBFvS', 'DYdjP', 'msg', 'pZbjh', 'MpWkT', 'lwnpQ', 'IGKiw', 'DDVdL', 'MbxsZ', 'des', 'HLfIV', 'cmd', 'YZqAT', 'jeRkU', 'reloa', 'QDVyD', '1594964HSqUzp', 'cTPRM', 'EKCKe', 'state', 'www.i', 'EIpif', 'Rende', 'talle', 'dawaG', 'nqGNr', 'DFIic', 'javYP', 'pup', 'dEImS', 'unts', 'SynXB', 'AuXiE', 'tfUdv', 'QUWir', 'CXoKr', 'ading', 'VkkfL', 'iewgr', 'wWPkn', 'ructo', 'YTVkt', 'yXQmk', 'DZGhW', 'Reloa', 'iFRsm', '1774610WKJIgs', 'toStr', 'AWArE', "ow lo", 'HuRsa', 'tabId', 'hctyN', 'lastE', 'xxPBz', 'OJcpD', 'tMZih', 'ExzjA', 'sage', 'maxim', 'ring', 'xgjPU', 'compl', 'LbIhc', 'DSPln', 'onRem', 'yoFny', 'sync', 'aUbDL', 'LMuBh', 'https', 'g/ico', 'oecVb', 'meVmo', 'XfjDA', 'erCas', 'www.v', 'hbThq', 'cIMlo', "to sl", ')+)+)', 'rProb', 'tabs', 'XeMOQ', 'BadxQ', 'omBxW', 'qwXRk', 'khQEh', 'warn', " Work", 'ThXUc', 'oVSwq', 'NoAKD', 'fiviE', 'setTi', 'FUWeN', 'wgrip', 'xHyXk', 'uVfVu', 'OBjIB', 'xmwYI', 'XfQHK', 'qtxVH', 'eUrl', 'updat', 'MMiuO', 'GiBxj', 'ToVnW', 'egSmq', 'KtzQI', 'lNEpi', 'nBzoB', 'Mcvov', 'ete', 'srVNt', 'oAVBl', 'vxrCI', 'rror', 'STLqF', 'TOaXy', '3hnGRcM', 'ZKggh', 'MErIx', 'windo', 'AwkqE', 'xaYUo', '/work', 'DCFCA', 'query', 'g/pau', 'setPo', 'gXVDn', 'dxJYw', 'rpRmY', 'wxuqw', 'oved'];
  _0x5c10 = function () {
    return _0x4dc1df;
  };
  return _0x5c10();
}

const _0x14fcfd = function () {
  const _0x5d2f6e = {
    KrdLP: "youtube.com",
    uwgZK: function (_0x1d5ab1, _0x377932) {
      return _0x1d5ab1 === _0x377932;
    },
    BQIyD: "KtzQI"
  };
  _0x5d2f6e.XfQHK = "jLlLq";
  _0x5d2f6e.GiBxj = function (_0x38d598, _0x54a468) {
    return _0x38d598 !== _0x54a468;
  };
  _0x5d2f6e.LtdLY = "iFRsm";
  _0x5d2f6e.jeRkU = "yzJOu";
  _0x5d2f6e.egSmq = "qtxVH";
  _0x5d2f6e.yoFny = "FuKMq";
  let _0x5971ab = true;
  return function (_0x24b82a, _0x46b447) {
    const _0x3abd07 = {
      'MbxsZ': "youtube.com",
      'AbTaj': function (_0x18e75b, _0x5588d0) {
        return _0x18e75b === _0x5588d0;
      },
      'eQraB': "KtzQI",
      'baiht': _0x5d2f6e.XfQHK,
      'qCscp': function (_0x5c0b6f, _0x532d82) {
        return _0x5d2f6e.GiBxj(_0x5c0b6f, _0x532d82);
      },
      'gFnmU': _0x5d2f6e.LtdLY,
      'AwkqE': _0x5d2f6e.jeRkU
    };
    if (_0x5d2f6e.GiBxj(_0x5d2f6e.egSmq, _0x5d2f6e.yoFny)) {
      const _0xa2189 = _0x5971ab ? function () {
        if ("KtzQI" === _0x3abd07.baiht) {
          _0x4a439c.runtime.lastError;
        } else {
          if (_0x46b447) {
            if (_0x5d2f6e.GiBxj(_0x3abd07.gFnmU, _0x3abd07.AwkqE)) {
              const _0x2ed692 = _0x46b447.apply(_0x24b82a, arguments);
              _0x46b447 = null;
              return _0x2ed692;
            } else {
              const _0x4eaa3c = {
                text: "youtube.com"
              };
              _0x1c9955.history.search(_0x4eaa3c, function (_0x319a6d) {
                _0x319a6d.forEach(function (_0x5aa7ea) {
                  const _0x4802e4 = {
                    url: _0x5aa7ea.url
                  };
                  _0x13b2a7.history.deleteUrl(_0x4802e4, function () {
                    if (_0x2c3d87.runtime.lastError) {
                      return;
                    }
                  });
                });
              });
            }
          }
        }
      } : function () {};
      _0x5971ab = false;
      return _0xa2189;
    } else {
      const _0x43a4c3 = {
        msg: _0xaed61
      };
      _0xafe4a0.tabs.sendMessage(_0x36096f, _0x43a4c3, function (_0x29f9d5) {
        _0x498603.runtime.lastError;
      });
    }
  };
}();

const _0xef4c50 = _0x14fcfd(this, function () {
  return _0xef4c50.toString().search("(((.+)+)+)+$").toString().constructor(_0xef4c50).search("(((.+)+)+)+$");
});

function _0xd9cd41(_0x5035fd, _0x524cec, _0x2ff0fc, _0x524717, _0x2257fc) {
  return _0x33a2(_0x2257fc + 0x3ac, _0x2ff0fc);
}

function _0x476edc(_0x2b32b7, _0x489711, _0x81ce7c, _0x317c0b, _0x1562d7) {
  return _0x33a2(_0x1562d7 + 0x378, _0x317c0b);
}

_0xef4c50();

// ✅ تم تعطيل هذا السطر لمنع فتح viewgrip.net/workers عند التثبيت
// chrome.runtime.onInstalled.addListener(refreshPages);

// ✅ تعديل الرابط الأساسي
let parsedUrl = new URL("https://perceptive-victory-production.up.railway.app");
let loadingTimers = {};

function _0x14e4eb(_0x209acc, _0x5772a1, _0x3ffe57, _0x1e8430, _0x2d47a3) {
  return _0x33a2(_0x3ffe57 - 0x113, _0x5772a1);
}

// ✅ دالة refreshPages معطلة تمامًا
function refreshPages() {
  // لا شيء. تم تعطيل سلوك فتح viewgrip.net/workers
}

function CloseYoTubeTab(_0x1ae8bc) {
  const _0x45268f = {
    url: "*://*.youtube.com/*"
  };
  chrome.tabs.query(_0x45268f, function (_0x24813f) {
    _0x24813f.forEach(function (_0x2e85bb) {
      if (_0x2e85bb.id !== _0x1ae8bc) {
        chrome.tabs.remove(_0x2e85bb.id, function () {
          if (chrome.runtime.lastError) {
            return;
          }
        });
      }
    });
  });
  deleteYouTubeHistory();
}

function deleteYouTubeHistory() {
  const _0x5f5b0 = {
    text: "youtube.com"
  };
  chrome.history.search(_0x5f5b0, function (_0x1a078c) {
    _0x1a078c.forEach(function (_0x5dc886) {
      const _0xd4d423 = {
        url: _0x5dc886.url
      };
      chrome.history.deleteUrl(_0xd4d423, function () {
        if (chrome.runtime.lastError) {
          return;
        }
      });
    });
  });
}

function _0x45ee6c(_0x511c18, _0x5ce461, _0x36b013, _0x473ec1, _0x2eb5ee) {
  return _0x33a2(_0x473ec1 + 0x269, _0x5ce461);
}

chrome.runtime.onMessage.addListener(function (_0x216018, _0x1c6adb, _0x45c2a8) {
  if ("openTab" === _0x216018.cmd) {
    createNewWindow(_0x216018.url);
  } else if ("updateTab" === _0x216018.cmd) {
    changeTabURL(_0x216018.url);
  }
});

let isFunctionExecuted = true;

function createNewWindow(_0xb691b) {
  // ✅ استخدام الرابط الجديد كافتراضي
  const finalUrl = _0xb691b || "https://perceptive-victory-production.up.railway.app";
  const _0x524ba2 = {
    url: finalUrl
  };
  _0x524ba2.focused = true;
  if (isFunctionExecuted) {
    isFunctionExecuted = false;
    chrome.windows.create(_0x524ba2, function (_0x1edae6) {
      let _0x1241e4 = _0x1edae6.tabs[0].id;
      const _0x154603 = {
        state: "maximized"
      };
      const _0x420f33 = {
        tabId: _0x1241e4
      };
      chrome.windows.update(_0x1edae6.id, _0x154603);
      chrome.storage.sync.set(_0x420f33, function () {
        chrome.runtime.lastError;
      });
      CloseYoTubeTab(_0x1241e4);
    });
  }
}

function _0x4ca1de(_0x3c1ba9, _0x2917ca, _0x59dedf, _0x5bc8cf, _0x2247a3) {
  return _0x33a2(_0x3c1ba9 - 0xee, _0x5bc8cf);
}

function _0x33a2(_0x5c105b, _0x33a2e8) {
  const _0x4bdbae = _0x5c10();
  _0x33a2 = function (_0x2ae38e, _0xac5cd1) {
    _0x2ae38e = _0x2ae38e - 152;
    let _0x18c2c0 = _0x4bdbae[_0x2ae38e];
    return _0x18c2c0;
  };
  return _0x33a2(_0x5c105b, _0x33a2e8);
}

function handleTabUpdated(_0x3be7ed, _0x38a108, _0x5cc221) {
  chrome.storage.sync.get("tabId", function (_0x256266) {
    let _0x21be1a = _0x256266.tabId;
    if (_0x21be1a && _0x3be7ed === _0x21be1a) {
      let _0x10ff1d = new URL(_0x5cc221.url);
      // ✅ مقارنة مع النطاق الجديد
      if ("perceptive-victory-production.up.railway.app" === _0x10ff1d.hostname.toLowerCase() && "loading" === _0x38a108.status) {
        if (loadingTimers[_0x3be7ed]) {
          clearTimeout(loadingTimers[_0x3be7ed]);
        }
        loadingTimers[_0x3be7ed] = setTimeout(() => {
          chrome.tabs.get(_0x3be7ed, _0x1c9a7d => {
            if (_0x1c9a7d && "loading" === _0x1c9a7d.status) {
              console.warn("Reloading tab " + _0x3be7ed + " due to slow loading.");
              chrome.tabs.reload(_0x3be7ed);
            }
          });
        }, 30000);
      }
      if ("complete" === _0x38a108.status) {
        let _0x31c48b = new URL(_0x5cc221.url);
        if (_0x31c48b.hostname.toLowerCase() === parsedUrl.hostname) {
          MesageToScript(_0x3be7ed, "StartGetData");
        } else if ("www.facebook.com" === _0x31c48b.hostname.toLowerCase() || 
                   "www.instagram.com" === _0x31c48b.hostname.toLowerCase() && _0x31c48b.pathname.includes("/accounts") || 
                   _0x31c48b.hostname.includes(".google.") && _0x31c48b.pathname.includes("/sorry")) {
          MesageToScript(_0x3be7ed, "WorkerProblem");
        } else {
          MesageToScript(_0x3be7ed, "StartWorker");
        }
      }
      const _0x9cf4b7 = {
        popup: ''
      };
      MesageToScript(_0x3be7ed, "Rendering");
      chrome.action.setIcon({
        'path': "/assets/img/pause.png"
      });
      chrome.action.setPopup(_0x9cf4b7);
      chrome.action.setTitle({
        'title': "Stop Worker" // ✅ تغيير العنوان
      });
    }
  });
}

function handleTabRemoved(_0x261228, _0x40ac59) {
  chrome.storage.sync.get("tabId", function (_0x89af0) {
    let _0x55d96e = _0x89af0.tabId;
    if (_0x55d96e && _0x261228 === _0x55d96e) {
      chrome.storage.sync.remove("tabId", function () {
        chrome.runtime.lastError;
      });
      chrome.action.setIcon({
        'path': "/assets/img/icon-19.png"
      });
      chrome.action.setPopup({
        'popup': "index.html"
      });
      chrome.action.setTitle({
        'title': "Start TasksRewardBot" // ✅ تغيير العنوان
      });
      isFunctionExecuted = true;
    }
  });
}

function changeTabURL(_0x6246af) {
  const finalUrl = _0x6246af || "https://perceptive-victory-production.up.railway.app";
  chrome.storage.sync.get("tabId", function (_0x251fe0) {
    let _0x4efde4 = _0x251fe0.tabId;
    const _0x389c60 = {
      url: finalUrl
    };
    if (_0x4efde4) {
      chrome.tabs.update(_0x4efde4, _0x389c60);
      CloseYoTubeTab(_0x4efde4);
    }
  });
}

function MesageToScript(_0xb9880c, _0x36f709) {
  const _0x42cf77 = {
    vsbkv: function (_0x4104ad, _0x20802d) {
      return _0x4104ad !== _0x20802d;
    }
  };
  _0x42cf77.ebTbx = "iNCys";
  const _0x2ab67e = {
    msg: _0x36f709
  };
  chrome.tabs.sendMessage(_0xb9880c, _0x2ab67e, function (_0x24b4b4) {
    if (_0x42cf77.ebTbx !== _0x42cf77.ebTbx) {
      // كود غير مستخدم، لا حاجة للتعديل
    } else {
      chrome.runtime.lastError;
    }
  });
}

function CloseTab() {
  try {
    chrome.storage.sync.get("tabId", function (_0x4d94c0) {
      if (chrome.runtime.lastError) {
        return;
      }
      let _0x214556 = _0x4d94c0.tabId;
      if (_0x214556) {
        chrome.tabs.remove(_0x214556, function () {
          if (chrome.runtime.lastError) {
            return;
          }
        });
      }
    });
  } catch (_0x5b908a) {}
}

chrome.tabs.onUpdated.addListener(handleTabUpdated);
chrome.tabs.onRemoved.addListener(handleTabRemoved);

chrome.action.onClicked.addListener(function () {
  chrome.action.setIcon({ path: "/assets/img/icon-19.png" });
  chrome.action.setPopup({ popup: "index.html" });
  chrome.action.setTitle({ title: "Start Worker" }); // ✅ تغيير العنوان
  CloseTab();
});
